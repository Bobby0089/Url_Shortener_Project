<app-nav></app-nav>
<div class="main">
    <div class="heading-container">
        <h1 class="page-heading">View Blacklisted Users</h1>
    </div>

    <div class="content-container">
        <div class="filters-section">
            <div class="filter-group">
                <label class="filter-label">Username:</label>
                <input type="text" class="filter-input" placeholder="Filter by Username" [(ngModel)]="filters.username">
            </div>
            <div class="filter-group">
                <label class="filter-label">First Name:</label>
                <input type="text" class="filter-input" placeholder="Filter by First Name"
                    [(ngModel)]="filters.firstname">
            </div>
            <div class="filter-group">
                <label class="filter-label">Last Name:</label>
                <input type="text" class="filter-input" placeholder="Filter by Last Name"
                    [(ngModel)]="filters.lastname">
            </div>
        </div>

        <div class="buttons-section">
            <button class="btn btn-primary" (click)="applyFilters()">Apply Filters</button>
            <button class="btn btn-secondary" (click)="removeFilters()">Remove Filters</button>
        </div>

        <button class="btn btn-download" (click)="downloadCSV()">Download CSV</button>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Sr. No.</th>
                        <th>Username</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Activate</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let user of filteredUserArray; let i = index">
                        <td>{{ (pagenumber - 1) * pagesize + i + 1 }}</td>
                        <td>{{user.username || 'N/A'}}</td>
                        <td>{{user.firstname || 'N/A'}}</td>
                        <td>{{user.lastname || 'N/A'}}</td>
                        <td><button type="button" (click)="onActivate(user.id)"
                                class="btn btn-activate">Activate</button></td>
                    </tr>
                    <tr *ngIf="filteredUserArray.length === 0 && allUsers.length === 0">
                        <td colspan="5" style="text-align: center; padding: 20px;">No blacklisted users found</td>
                    </tr>
                    <tr *ngIf="filteredUserArray.length === 0 && allUsers.length > 0">
                        <td colspan="5" style="text-align: center; padding: 20px;">No users found matching the filter
                            criteria</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="pagination-section">
            <div class="rows-selector">
                <span>Rows per page:</span>
                <select (change)="onPageSizeChange($event)">
                    <option value="4" [selected]="pagesize === 4">4</option>
                    <option value="10" [selected]="pagesize === 10">10</option>
                    <option value="25" [selected]="pagesize === 25">25</option>
                    <option value="50" [selected]="pagesize === 50">50</option>
                </select>
            </div>
            <div class="pagination">
                <button class="page-btn" (click)="onPageChange(pagenumber - 1)"
                    [disabled]="pagenumber === 1">&lt;</button>
                <button *ngFor="let pageNum of getPageNumbers()" class="page-btn"
                    [class.active]="pageNum === pagenumber" (click)="onPageChange(pageNum)">{{pageNum}}</button>
                <button class="page-btn" (click)="onPageChange(pagenumber + 1)"
                    [disabled]="pagenumber === totalPages">&gt;</button>
            </div>
        </div>
    </div>
</div>
<app-footer></app-footer>